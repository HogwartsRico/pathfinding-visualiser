<link rel="import" href="../bower_components/paper-button/paper-button.html">
<link rel="import" href="../bower_components/paper-slider/paper-slider.html">

<polymer-element name="pathfinding-visualiser">
  <template>
    <style>
    :host {
      display: block;
      background-color: white;
      color:#000;
    }   

    paper-button {
      margin: 1em;
    }

    paper-button.colored {
      color: #9b59bf;
      fill: #9b59bf;
    }

    paper-button[raisedButton].colored {
      background: #9b59bf;
      color: #fff;
    }

    paper-button[raisedButton].colored #ripple,
    paper-button[raisedButton].colored::shadow #ripple {
      color: #e0544c;
    }

    paper-button[raisedButton].colored #focusBg,
    paper-button[raisedButton].colored::shadow #focusBg {
      background: #3367d6;
    }
    </style>

    <canvas id="canvas" width="640" height="480" oncontextmenu="return false;"></canvas>
    <div id="info"></div>
    <paper-slider pin value="50"></paper-slider>
    <paper-button raisedbutton class="colored" label="Clear" role="button" tabindex="0" aria-label="colored" id="clearButton" on-click="{{ clear }}"></paper-button>
    <paper-button raisedbutton class="colored" label="Run" role="button" tabindex="0" aria-label="colored" id="runButton" on-click="{{ run }}"></paper-button>
  </template>
  <script src="core.js" type="text/javascript"></script>
  <script src="canvas-helper.js" type="text/javascript"></script>
  <script src="algorithms/a-star.js" type="text/javascript"></script>
  <script src="pathfinding-visualiser.js" type="text/javascript"></script>
  <script>
  Polymer("pathfinding-visualiser", {

    ready: function () {
      pathfindingVisualiser.init(this.$.canvas);
      pathfindingVisualiser.setAlgorithm(aStar);
    },

    clear: pathfindingVisualiser.clear,

    run: function () {
      var button = this.$.runButton;
      if (button.disabled)
        return;
      var info = this.$.info;
      button.disabled = true;
      pathfindingVisualiser.run(function (result) {
        info.innerHTML = result;
        button.disabled = false;
      });
    }

  });
  </script>
</polymer-element>
